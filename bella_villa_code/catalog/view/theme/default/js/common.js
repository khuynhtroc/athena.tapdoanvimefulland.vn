!function(t){t.fn.pxgradient=function(e){function n(t){return"#"==t.substr(0,1)&&(t=t.substr(1)),3==t.length&&(t=t.substr(0,1)+t.substr(0,1)+t.substr(1,1)+t.substr(1,1)+t.substr(2,1)+t.substr(2,1)),[parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16)]}function i(t){var e="0123456789abcdef";return"#"+e.charAt(parseInt(t[0]/16))+e.charAt(t[0]%16)+e.charAt(parseInt(t[1]/16))+e.charAt(t[1]%16)+e.charAt(parseInt(t[2]/16))+e.charAt(t[2]%16)}function s(t,n){for(var i=t>0?t/n:0,s=0;s<e.colors.length;s++){if(fStopPosition=s/(e.colors.length-1),fLastPosition=s>0?(s-1)/(e.colors.length-1):0,i==fStopPosition)return e.colors[s];if(i<fStopPosition)return fCurrentStop=(i-fLastPosition)/(fStopPosition-fLastPosition),o(e.RGBcolors[s-1],e.RGBcolors[s],fCurrentStop)}return e.colors[e.colors.length-1]}function o(t,e,n){for(var s=[],o=0;3>o;o++)s[o]=t[o]+Math.round((e[o]-t[o])*n);return i(s)}var e=t.extend({step:10,colors:["#ffcc00","#cc0000","#000000"],dir:"y"},e);e.RGBcolors=[];for(var r=0;r<e.colors.length;r++)e.RGBcolors[r]=n(e.colors[r]);return this.each(function(n,i){var o=t(i);if(!o.hasClass("sn-pxg")){var r=o.html();o.html('<span class="pxg-source" style="visibility: hidden;">'+r+"</span>").append('<u class="pxg-set"></u>');var a=o.find(".pxg-set"),h=o.find(".pxg-source"),u=h.innerWidth(),c=h.innerHeight();if(h.hide(),o.addClass("sn-pxg"),"x"==e.dir)var l=u;else if("y"==e.dir)var l=c;var f=Math.floor(l/e.step),d=f,p=l-f*e.step;p>0&&d++,a.css({width:u,height:c});var g=0,m="";if("x"==e.dir)for(var n=0;d>n;n++){var v=s(g,l);m+='<s style="height:'+c+"px;width:"+e.step+"px;left:"+g+"px;color:"+v+'"><b style="left:-'+g+"px;width:"+u+"px;height:"+c+'px;">'+r+"</b></s>",g+=e.step}else if("y"==e.dir)for(var n=0;d>n;n++){var v=s(g,l);m+='<s style="width:'+u+"px;height:"+e.step+"px;top:"+g+"px;color:"+v+'"><b style="top:-'+g+"px;height:"+u+"px;height:"+c+'px;">'+r+"</b></s>",g+=e.step}a.append(m)}})}}(jQuery),function(t){function e(e,n,i,s){var o=e.text().split(n),r="";o.length&&(t(o).each(function(t,e){r+='<span class="'+i+(t+1)+'">'+e+"</span>"+s}),e.empty().append(r))}var n={init:function(){return this.each(function(){e(t(this),"","char","")})},words:function(){return this.each(function(){e(t(this)," ","word"," ")})},lines:function(){return this.each(function(){var n="eefec303079ad17405c889e092e105b0";e(t(this).children("br").replaceWith(n).end(),n,"line","")})}};t.fn.lettering=function(e){return e&&n[e]?n[e].apply(this,[].slice.call(arguments,1)):"letters"!==e&&e?(t.error("Method "+e+" does not exist on jQuery.lettering"),this):n.init.apply(this,[].slice.call(arguments,0))}}(jQuery),function(t){t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,n,i,s,o){return t.easing[t.easing.def](e,n,i,s,o)},easeInQuad:function(t,e,n,i,s){return i*(e/=s)*e+n},easeOutQuad:function(t,e,n,i,s){return-i*(e/=s)*(e-2)+n},easeInOutQuad:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,s){return i*(e/=s)*e*e+n},easeOutCubic:function(t,e,n,i,s){return i*((e=e/s-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,s){return i*(e/=s)*e*e*e+n},easeOutQuart:function(t,e,n,i,s){return-i*((e=e/s-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,s){return i*(e/=s)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,s){return i*((e=e/s-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,s){return i*Math.sin(e/s*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+n},easeInExpo:function(t,e,n,i,s){return 0==e?n:i*Math.pow(2,10*(e/s-1))+n},easeOutExpo:function(t,e,n,i,s){return e==s?n+i:i*(-Math.pow(2,-10*e/s)+1)+n},easeInOutExpo:function(t,e,n,i,s){return 0==e?n:e==s?n+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,s){return-i*(Math.sqrt(1-(e/=s)*e)-1)+n},easeOutCirc:function(t,e,n,i,s){return i*Math.sqrt(1-(e=e/s-1)*e)+n},easeInOutCirc:function(t,e,n,i,s){return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,s){var o=1.70158,r=0,a=i;if(0==e)return n;if(1==(e/=s))return n+i;if(r||(r=.3*s),a<Math.abs(i)){a=i;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+n},easeOutElastic:function(t,e,n,i,s){var o=1.70158,r=0,a=i;if(0==e)return n;if(1==(e/=s))return n+i;if(r||(r=.3*s),a<Math.abs(i)){a=i;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*e)*Math.sin((e*s-o)*(2*Math.PI)/r)+i+n},easeInOutElastic:function(t,e,n,i,s){var o=1.70158,r=0,a=i;if(0==e)return n;if(2==(e/=s/2))return n+i;if(r||(r=s*(.3*1.5)),a<Math.abs(i)){a=i;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(i/a);return 1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+n:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r)*.5+i+n},easeInBack:function(t,e,n,i,s,o){return void 0==o&&(o=1.70158),i*(e/=s)*e*((o+1)*e-o)+n},easeOutBack:function(t,e,n,i,s,o){return void 0==o&&(o=1.70158),i*((e=e/s-1)*e*((o+1)*e+o)+1)+n},easeInOutBack:function(t,e,n,i,s,o){return void 0==o&&(o=1.70158),(e/=s/2)<1?i/2*(e*e*(((o*=1.525)+1)*e-o))+n:i/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+n},easeInBounce:function(e,n,i,s,o){return s-t.easing.easeOutBounce(e,o-n,0,s,o)+i},easeOutBounce:function(t,e,n,i,s){return(e/=s)<1/2.75?i*(7.5625*e*e)+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(e,n,i,s,o){return o/2>n?.5*t.easing.easeInBounce(e,2*n,0,s,o)+i:.5*t.easing.easeOutBounce(e,2*n-o,0,s,o)+.5*s+i}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=h.call(arguments,1),u=0,c=0,l=0,f=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(l=-1*r.detail),"wheelDelta"in r&&(l=r.wheelDelta),"wheelDeltaY"in r&&(l=r.wheelDeltaY),"wheelDeltaX"in r&&(c=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(c=-1*l,l=0),u=0===l?c:l,"deltaY"in r&&(l=-1*r.deltaY,u=l),"deltaX"in r&&(c=r.deltaX,0===l&&(u=-1*c)),0!==l||0!==c){if(1===r.deltaMode){var d=t.data(this,"mousewheel-line-height");u*=d,l*=d,c*=d}else if(2===r.deltaMode){var p=t.data(this,"mousewheel-page-height");u*=p,l*=p,c*=p}return f=Math.max(Math.abs(l),Math.abs(c)),(!o||o>f)&&(o=f,i(r,f)&&(o/=40)),i(r,f)&&(u/=40,c/=40,l/=40),u=Math[u>=1?"floor":"ceil"](u/o),c=Math[c>=1?"floor":"ceil"](c/o),l=Math[l>=1?"floor":"ceil"](l/o),e.deltaX=c,e.deltaY=l,e.deltaFactor=o,e.deltaMode=0,a.unshift(e,u,c,l),s&&clearTimeout(s),s=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){o=null}function i(t,e){return c.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice;if(t.event.fixHooks)for(var u=r.length;u;)t.event.fixHooks[r[--u]]=t.event.mouseHooks;var c=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",c.getLineHeight(this)),t.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=a.length;t;)this.removeEventListener(a[--t],e,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(t(e)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){function e(t){var e=t.data("_ARS_data");return e||(e={rotateUnits:"deg",scale:1,rotate:0},t.data("_ARS_data",e)),e}function n(t,e){t.css("transform","rotate("+e.rotate+e.rotateUnits+") scale("+e.scale+","+e.scale+")")}t.fn.rotate=function(i){var s,o=t(this),r=e(o);return"undefined"==typeof i?r.rotate+r.rotateUnits:(s=i.toString().match(/^(-?\d+(\.\d+)?)(.+)?$/),s&&(s[3]&&(r.rotateUnits=s[3]),r.rotate=s[1],n(o,r)),this)},t.fn.scale=function(i){var s=t(this),o=e(s);return"undefined"==typeof i?o.scale:(o.scale=i,n(s,o),this)};var i=t.fx.prototype.cur;t.fx.prototype.cur=function(){return"rotate"==this.prop?parseFloat(t(this.elem).rotate()):"scale"==this.prop?parseFloat(t(this.elem).scale()):i.apply(this,arguments)},t.fx.step.rotate=function(n){var i=e(t(n.elem));t(n.elem).rotate(n.now+i.rotateUnits)},t.fx.step.scale=function(e){t(e.elem).scale(e.now)};var s=t.fn.animate;t.fn.animate=function(n){if("undefined"!=typeof n.rotate){var i,o,r=n.rotate.toString().match(/^(([+-]=)?(-?\d+(\.\d+)?))(.+)?$/);r&&r[5]&&(i=t(this),o=e(i),o.rotateUnits=r[5]),n.rotate=r[1]}return s.apply(this,arguments)}}(jQuery),function(t){"use strict";var e="draptouch-active";window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()),t.support=t.support||{},t.extend(t.support,{touch:"ontouchend"in document});var n=function(){return!1},i=function(e,n){return this.settings=n,this.el=e,this.$el=t(e),this._initElements(),this};i.DATA_KEY="draptouch",i.DEFAULTS={cursor:"",decelerate:!0,triggerHardware:!1,threshold:0,y:!0,x:!0,slowdown:.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"draptouch-moving-up",down:"draptouch-moving-down",left:"draptouch-moving-left",right:"draptouch-moving-right"},deceleratingClass:{up:"draptouch-decelerating-up",down:"draptouch-decelerating-down",left:"draptouch-decelerating-left",right:"draptouch-decelerating-right"}},i.prototype.start=function(e){this.settings=t.extend(this.settings,e),this.velocity=e.velocity||this.velocity,this.velocityY=e.velocityY||this.velocityY,this.settings.decelerate=!1,this._move()},i.prototype.end=function(){this.settings.decelerate=!0},i.prototype.stop=function(){this.velocity=0,this.velocityY=0,this.settings.decelerate=!0,t.isFunction(this.settings.stopped)&&this.settings.stopped.call(this)},i.prototype.detach=function(){this._detachListeners(),this.$el.removeClass(e).css("cursor","")},i.prototype.attach=function(){this.$el.hasClass(e)||(this._attachListeners(this.$el),this.$el.addClass(e).css("cursor",this.settings.cursor))},i.prototype._initElements=function(){this.$el.addClass(e),t.extend(this,{xpos:null,prevXPos:!1,ypos:null,prevYPos:!1,mouseDown:!1,throttleTimeout:1e3/this.settings.throttleFPS,lastMove:null,elementFocused:null}),this.velocity=0,this.velocityY=0,t(document).mouseup(t.proxy(this._resetMouse,this)).click(t.proxy(this._resetMouse,this)),this._initEvents(),this.$el.css("cursor",this.settings.cursor),this.settings.triggerHardware&&this.$el.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})},i.prototype._initEvents=function(){var e=this;this.settings.events={touchStart:function(t){var n;e._useTarget(t.target,t)&&(n=t.originalEvent.touches[0],e.threshold=e._threshold(t.target,t),e._start(n.clientX,n.clientY),t.stopPropagation())},touchMove:function(t){var n;e.mouseDown&&(n=t.originalEvent.touches[0],e._inputmove(n.clientX,n.clientY),t.preventDefault&&t.preventDefault())},inputDown:function(t){e._useTarget(t.target,t)&&(e.threshold=e._threshold(t.target,t),e._start(t.clientX,t.clientY),e.elementFocused=t.target,"IMG"===t.target.nodeName&&t.preventDefault(),t.stopPropagation())},inputEnd:function(t){e._useTarget(t.target,t)&&(e._end(),e.elementFocused=null,t.preventDefault&&t.preventDefault())},inputMove:function(t){e.mouseDown&&(e._inputmove(t.clientX,t.clientY),t.preventDefault&&t.preventDefault())},scroll:function(n){t.isFunction(e.settings.moved)&&e.settings.moved.call(e,e.settings),n.preventDefault&&n.preventDefault()},inputClick:function(t){return Math.abs(e.velocity)>0?(t.preventDefault(),!1):void 0},dragStart:function(t){return e._useTarget(t.target,t)&&e.elementFocused?!1:void 0}},this._attachListeners(this.$el,this.settings)},i.prototype._inputmove=function(e,n){var i=this.$el;this.el;if((!this.lastMove||new Date>new Date(this.lastMove.getTime()+this.throttleTimeout))&&(this.lastMove=new Date,this.mouseDown&&(this.xpos||this.ypos))){var s=e-this.xpos,o=n-this.ypos;if(this.threshold>0){var r=Math.sqrt(s*s+o*o);if(this.threshold>r)return;this.threshold=0}this.elementFocused&&(t(this.elementFocused).blur(),this.elementFocused=null,i.focus()),this.settings.decelerate=!1,this.velocity=this.velocityY=0;var a=this.scrollLeft(),h=this.scrollTop();this.scrollLeft(this.settings.x?a-s:a),this.scrollTop(this.settings.y?h-o:h),this.prevXPos=this.xpos,this.prevYPos=this.ypos,this.xpos=e,this.ypos=n,this._calculateVelocities(),this._setMoveClasses(this.settings.movingClass),t.isFunction(this.settings.moved)&&this.settings.moved.call(this,this.settings)}},i.prototype._calculateVelocities=function(){this.velocity=this._capVelocity(this.prevXPos-this.xpos,this.settings.maxvelocity),this.velocityY=this._capVelocity(this.prevYPos-this.ypos,this.settings.maxvelocity)},i.prototype._end=function(){this.xpos&&this.prevXPos&&this.settings.decelerate===!1&&(this.settings.decelerate=!0,this._calculateVelocities(),this.xpos=this.prevXPos=this.mouseDown=!1,this._move())},i.prototype._useTarget=function(e,n){return t.isFunction(this.settings.filterTarget)?this.settings.filterTarget.call(this,e,n)!==!1:!0},i.prototype._threshold=function(e,n){return t.isFunction(this.settings.threshold)?this.settings.threshold.call(this,e,n):this.settings.threshold},i.prototype._start=function(t,e){this.mouseDown=!0,this.velocity=this.prevXPos=0,this.velocityY=this.prevYPos=0,this.xpos=t,this.ypos=e},i.prototype._resetMouse=function(){this.xpos=!1,this.ypos=!1,this.mouseDown=!1},i.prototype._decelerateVelocity=function(t,e){return 0===Math.floor(Math.abs(t))?0:t*e},i.prototype._capVelocity=function(t,e){var n=t;return t>0?t>e&&(n=e):0-e>t&&(n=0-e),n},i.prototype._setMoveClasses=function(t){var e=this.settings,n=this.$el;n.removeClass(e.movingClass.up).removeClass(e.movingClass.down).removeClass(e.movingClass.left).removeClass(e.movingClass.right).removeClass(e.deceleratingClass.up).removeClass(e.deceleratingClass.down).removeClass(e.deceleratingClass.left).removeClass(e.deceleratingClass.right),this.velocity>0&&n.addClass(t.right),this.velocity<0&&n.addClass(t.left),this.velocityY>0&&n.addClass(t.down),this.velocityY<0&&n.addClass(t.up)},i.prototype._move=function(){var e=(this.$el,this.el),n=this,i=n.settings;i.x&&e.scrollWidth>0?(this.scrollLeft(this.scrollLeft()+this.velocity),Math.abs(this.velocity)>0&&(this.velocity=i.decelerate?n._decelerateVelocity(this.velocity,i.slowdown):this.velocity)):this.velocity=0,i.y&&e.scrollHeight>0?(this.scrollTop(this.scrollTop()+this.velocityY),Math.abs(this.velocityY)>0&&(this.velocityY=i.decelerate?n._decelerateVelocity(this.velocityY,i.slowdown):this.velocityY)):this.velocityY=0,n._setMoveClasses(i.deceleratingClass),t.isFunction(i.moved)&&i.moved.call(this,i),Math.abs(this.velocity)>0||Math.abs(this.velocityY)>0?this.moving||(this.moving=!0,window.requestAnimationFrame(function(){n.moving=!1,n._move()})):n.stop()},i.prototype._getScroller=function(){var e=this.$el;return(this.$el.is("body")||this.$el.is("html"))&&(e=t(window)),e},i.prototype.scrollLeft=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollLeft():(e.scrollLeft(t),void(this.settings.scrollLeft=t))},i.prototype.scrollTop=function(t){var e=this._getScroller();return"number"!=typeof t?e.scrollTop():(e.scrollTop(t),void(this.settings.scrollTop=t))},i.prototype._attachListeners=function(){var e=this.$el,i=this.settings;t.support.touch&&e.bind("touchstart",i.events.touchStart).bind("touchend",i.events.inputEnd).bind("touchmove",i.events.touchMove),e.mousedown(i.events.inputDown).mouseup(i.events.inputEnd).mousemove(i.events.inputMove),e.click(i.events.inputClick).scroll(i.events.scroll).bind("selectstart",n).bind("dragstart",i.events.dragStart)},i.prototype._detachListeners=function(){var e=this.$el,i=this.settings;t.support.touch&&e.unbind("touchstart",i.events.touchStart).unbind("touchend",i.events.inputEnd).unbind("touchmove",i.events.touchMove),e.unbind("mousedown",i.events.inputDown).unbind("mouseup",i.events.inputEnd).unbind("mousemove",i.events.inputMove),e.unbind("click",i.events.inputClick).unbind("scroll",i.events.scroll).unbind("selectstart",n).unbind("dragstart",i.events.dragStart)},t.DrapTouch=i,t.fn.draptouch=function(e,n){return this.each(function(){var s=t(this),o=s.data(i.DATA_KEY),r=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data(i.DATA_KEY,o=new i(this,r)),"string"==typeof e&&o[e](n)})}}(window.jQuery||window.Zepto),function(){"use strict";var t=function(t){var e=function(e,n){this.el=t(e),this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.options=t.extend({},this.defaults,n),this.setupMarkup(),this.bindEvents(),this.update(),this.enable()},n=function(t,e){return t+e},i=function(t,e){return t>e-.01&&e+.01>t};e.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,maxZoom:5,minZoom:.5,lockDragAxis:!1,use2d:!0,zoomStartEventName:"pz_zoomstart",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap"},handleDragStart:function(t){this.el.trigger(this.options.dragStartEventName),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(t)},handleDrag:function(t){if(this.zoomFactor>1){var e=this.getTouches(t)[0];this.drag(e,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=e}},handleDragEnd:function(){this.el.trigger(this.options.dragEndEventName),this.end()},handleZoomStart:function(){this.el.trigger(this.options.zoomStartEventName),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(t,e){var n=this.getTouchCenter(this.getTouches(t)),i=e/this.lastScale;this.lastScale=e,this.nthZoom+=1,this.nthZoom>3&&(this.scale(i,n),this.drag(n,this.lastZoomCenter)),this.lastZoomCenter=n},handleZoomEnd:function(){this.el.trigger(this.options.zoomEndEventName),this.end()},handleDoubleTap:function(t){var e=this.getTouches(t)[0],n=this.zoomFactor>1?1:this.options.tapZoomFactor,i=this.zoomFactor,s=function(t){this.scaleTo(i+t*(n-i),e)}.bind(this);this.hasInteraction||(i>n&&(e=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,this.options.animationInterval,s,this.swing),this.el.trigger(this.options.doubleTapEventName))},sanitizeOffset:function(t){var e=(this.zoomFactor-1)*this.getContainerX(),n=(this.zoomFactor-1)*this.getContainerY(),i=Math.max(e,0),s=Math.max(n,0),o=Math.min(e,0),r=Math.min(n,0);return{x:Math.min(Math.max(t.x,o),i),y:Math.min(Math.max(t.y,r),s)}},scaleTo:function(t,e){this.scale(t/this.zoomFactor,e)},scale:function(t,e){t=this.scaleZoomFactor(t),this.addOffset({x:(t-1)*(e.x+this.offset.x),y:(t-1)*(e.y+this.offset.y)})},scaleZoomFactor:function(t){var e=this.zoomFactor;return this.zoomFactor*=t,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/e},drag:function(t,e){e&&(this.options.lockDragAxis?Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?this.addOffset({x:-(t.x-e.x),y:0}):this.addOffset({y:-(t.y-e.y),x:0}):this.addOffset({y:-(t.y-e.y),x:-(t.x-e.x)}))},getTouchCenter:function(t){return this.getVectorAvg(t)},getVectorAvg:function(t){return{x:t.map(function(t){return t.x}).reduce(n)/t.length,y:t.map(function(t){return t.y}).reduce(n)/t.length}},addOffset:function(t){this.offset={x:this.offset.x+t.x,y:this.offset.y+t.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(t){var e=this.sanitizeOffset(t);return e.x!==t.x||e.y!==t.y},sanitizeOffsetAnimation:function(){var t=this.sanitizeOffset(this.offset),e={x:this.offset.x,y:this.offset.y},n=function(n){this.offset.x=e.x+n*(t.x-e.x),this.offset.y=e.y+n*(t.y-e.y),this.update()}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,n,this.swing)},zoomOutAnimation:function(){var t=this.zoomFactor,e=1,n=this.getCurrentZoomCenter(),i=function(i){this.scaleTo(t+i*(e-t),n)}.bind(this);this.animate(this.options.animationDuration,this.options.animationInterval,i,this.swing)},updateAspectRatio:function(){this.setContainerY(this.getContainerX()/this.getAspectRatio())},getInitialZoomFactor:function(){return this.container[0].offsetWidth/this.el[0].offsetWidth},getAspectRatio:function(){return this.el[0].offsetWidth/this.el[0].offsetHeight},getCurrentZoomCenter:function(){var t=this.container[0].offsetWidth*this.zoomFactor,e=this.offset.x,n=t-e-this.container[0].offsetWidth,i=e/n,s=i*this.container[0].offsetWidth/(i+1),o=this.container[0].offsetHeight*this.zoomFactor,r=this.offset.y,a=o-r-this.container[0].offsetHeight,h=r/a,u=h*this.container[0].offsetHeight/(h+1);return 0===n&&(s=this.container[0].offsetWidth),0===a&&(u=this.container[0].offsetHeight),{x:s,y:u}},canDrag:function(){return!i(this.zoomFactor,1)},getTouches:function(t){var e=this.container.offset();return Array.prototype.slice.call(t.touches).map(function(t){return{x:t.pageX-e.left,y:t.pageY-e.top}})},animate:function(t,e,n,i,s){var o=(new Date).getTime(),r=function(){if(this.inAnimation){var a=(new Date).getTime()-o,h=a/t;a>=t?(n(1),s&&s(),this.update(),this.stopAnimation(),this.update()):(i&&(h=i(h)),n(h),this.update(),setTimeout(r,e))}}.bind(this);this.inAnimation=!0,r()},stopAnimation:function(){this.inAnimation=!1},swing:function(t){return-Math.cos(t*Math.PI)/2+.5},getContainerX:function(){return this.container[0].offsetWidth},getContainerY:function(){return this.container[0].offsetHeight},setContainerY:function(t){return this.container.height(t)},setupMarkup:function(){this.container=t('<div class="pinch-zoom-container"></div>'),this.el.before(this.container),this.container.append(this.el),this.container.css({overflow:"hidden",position:"relative"}),this.el.css({"-webkit-transform-origin":"0% 0%","-moz-transform-origin":"0% 0%","-ms-transform-origin":"0% 0%","-o-transform-origin":"0% 0%","transform-origin":"0% 0%",position:"absolute"})},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){s(this.container.get(0),this),t(window).on("resize",this.update.bind(this)),t(this.el).find("img").on("load",this.update.bind(this))},update:function(){this.updatePlaned||(this.updatePlaned=!0,setTimeout(function(){this.updatePlaned=!1,this.updateAspectRatio();var t=this.getInitialZoomFactor()*this.zoomFactor,e=-this.offset.x/t,n=-this.offset.y/t,i="scale3d("+t+", "+t+",1) translate3d("+e+"px,"+n+"px,0px)",s="scale("+t+", "+t+") translate("+e+"px,"+n+"px)",o=function(){this.clone&&(this.clone.remove(),delete this.clone)}.bind(this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,o(),this.el.css({"-webkit-transform":i,"-o-transform":s,"-ms-transform":s,"-moz-transform":s,transform:i})):(this.is3d&&(this.clone=this.el.clone(),this.clone.css("pointer-events","none"),this.clone.appendTo(this.container),setTimeout(o,200)),this.el.css({"-webkit-transform":s,"-o-transform":s,"-ms-transform":s,"-moz-transform":s,transform:s}),this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var s=function(t,e){var n=null,i=0,s=null,o=null,r=function(t,i){if(n!==t){if(n&&!t)switch(n){case"zoom":e.handleZoomEnd(i);break;case"drag":e.handleDragEnd(i)}switch(t){case"zoom":e.handleZoomStart(i);break;case"drag":e.handleDragStart(i)}}n=t},a=function(t){2===i?r("zoom"):1===i&&e.canDrag()?r("drag",t):r(null,t)},h=function(t){return Array.prototype.slice.call(t).map(function(t){return{x:t.pageX,y:t.pageY}})},u=function(t,e){var n,i;return n=t.x-e.x,i=t.y-e.y,Math.sqrt(n*n+i*i)},c=function(t,e){var n=u(t[0],t[1]),i=u(e[0],e[1]);return i/n},l=function(t){t.stopPropagation(),t.preventDefault()},f=function(t){var o=(new Date).getTime();if(i>1&&(s=null),300>o-s)switch(l(t),e.handleDoubleTap(t),n){case"zoom":e.handleZoomEnd(t);break;case"drag":e.handleDragEnd(t)}1===i&&(s=o)},d=!0;t.addEventListener("touchstart",function(t){e.enabled&&(d=!0,i=t.touches.length,f(t))}),t.addEventListener("touchmove",function(t){if(e.enabled){if(d)a(t),n&&l(t),o=h(t.touches);else{switch(n){case"zoom":e.handleZoom(t,c(o,h(t.touches)));break;case"drag":e.handleDrag(t)}n&&(l(t),e.update())}d=!1}}),t.addEventListener("touchend",function(t){e.enabled&&(i=t.touches.length,a(t))})};return e};"undefined"!=typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):(window.Pic=window.Pic||{},window.Pic.PinchZoom=t(window.$))}.call(this),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return e(t,n)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){for(var n=t.length;--n;)if(Math.round(+t[n])!==Math.round(+e[n]))return!1;return!0}function i(t){var n={range:!0,animate:!0};return"boolean"==typeof t?n.animate=t:e.extend(n,t),n}function s(t,n,i,s,o,r,a,h,u){"array"===e.type(t)?this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:this.elements=[t,n,i,s,o,r,a||0,h||0,u||1]}function o(t,e,n){this.elements=[t,e,n]}function r(t,n){if(!(this instanceof r))return new r(t,n);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(a,t)||e.error("Panzoom element must be attached to the document");var i=e.data(t,h);if(i)return i;this.options=n=e.extend({},r.defaults,n),this.elem=t;var s=this.$elem=e(t);this.$set=n.$set&&n.$set.length?n.$set:s,this.$doc=e(t.ownerDocument||a),this.$parent=s.parent(),this.parent=this.$parent[0],this.isSVG=d.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=e.cssProps.transform.replace(f,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var o=e(),u=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){u[e]=n[e]||o}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),e.data(t,h,this)}var a=t.document,h="__pz__",u=Array.prototype.slice,c=/trident\/7./i,l=function(){if(c.test(navigator.userAgent))return!1;var t=a.createElement("input");return t.setAttribute("oninput","return"),"function"==typeof t.oninput}(),f=/([A-Z])/g,d=/^http:[\w\.\/]+svg$/,p="(\\-?\\d[\\d\\.e-]*)",g="\\,?\\s*",m=new RegExp("^matrix\\("+p+g+p+g+p+g+p+g+p+g+p+"\\)$");return s.prototype={x:function(t){var e=t instanceof o,n=this.elements,i=t.elements;return e&&3===i.length?new o(n[0]*i[0]+n[1]*i[1]+n[2]*i[2],n[3]*i[0]+n[4]*i[1]+n[5]*i[2],n[6]*i[0]+n[7]*i[1]+n[8]*i[2]):i.length===n.length?new s(n[0]*i[0]+n[1]*i[3]+n[2]*i[6],n[0]*i[1]+n[1]*i[4]+n[2]*i[7],n[0]*i[2]+n[1]*i[5]+n[2]*i[8],n[3]*i[0]+n[4]*i[3]+n[5]*i[6],n[3]*i[1]+n[4]*i[4]+n[5]*i[7],n[3]*i[2]+n[4]*i[5]+n[5]*i[8],n[6]*i[0]+n[7]*i[3]+n[8]*i[6],n[6]*i[1]+n[7]*i[4]+n[8]*i[7],n[6]*i[2]+n[7]*i[5]+n[8]*i[8]):!1},inverse:function(){var t=1/this.determinant(),e=this.elements;return new s(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},o.prototype.e=s.prototype.e=function(t){return this.elements[t]},r.rmatrix=m,r.defaults={eventNamespace:".panzoom",transition:!0,cursor:"",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,exponential:!0,panOnlyWhenZoomed:!1,minScale:.4,maxScale:5,rangeStep:.05,duration:600,easing:"ease-in-out",contain:!1},r.prototype={constructor:r,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,h)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var t=this.elem,n=t.getBoundingClientRect(),i=Math.abs(this.scale);this.dimensions={width:n.width,height:n.height,left:e.css(t,"left",!0)||0,top:e.css(t,"top",!0)||0,border:{top:e.css(t,"borderTopWidth",!0)*i||0,bottom:e.css(t,"borderBottomWidth",!0)*i||0,left:e.css(t,"borderLeftWidth",!0)*i||0,right:e.css(t,"borderRightWidth",!0)*i||0},margin:{top:e.css(t,"marginTop",!0)*i||0,left:e.css(t,"marginLeft",!0)*i||0}}},reset:function(t){t=i(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=i(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],i(t))},setTransform:function(t){for(var n=this.$set,i=n.length;i--;)e.style(n[i],"transform",t),this.isSVG&&n[i].setAttribute("transform",t)},getTransform:function(t){var n=this.$set,i=n[0];return t?this.setTransform(t):(t=e.style(i,"transform"),!this.isSVG||t&&"none"!==t||(t=e.attr(i,"transform")||"none")),"none"===t||m.test(t)||this.setTransform(t=e.css(i,"transform")),t||"none"},getMatrix:function(t){var e=m.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,n){if(!this.disabled){n||(n={}),"string"==typeof t&&(t=this.getMatrix(t));var i=+t[0],s="undefined"!=typeof n.contain?n.contain:this.options.contain;if(s){var o=n.dims;o||(this.resetDimensions(),o=this.dimensions);var r,a,h,u=this.container,c=o.width,l=o.height,f=u.width,d=u.height,p=f/c,g=d/l;"center"!==this.$parent.css("textAlign")||"inline"!==e.css(this.elem,"display")?(h=(c-this.elem.offsetWidth)/2,r=h-o.border.left,a=c-f-h+o.border.right):r=a=(c-f)/2;var m=(l-d)/2+o.border.top,v=(l-d)/2-o.border.top-o.border.bottom;"invert"===s||"automatic"===s&&1.01>p?t[4]=Math.max(Math.min(t[4],r-o.border.left),-a):t[4]=Math.min(Math.max(t[4],r),-a),"invert"===s||"automatic"===s&&1.01>g?t[5]=Math.max(Math.min(t[5],m-o.border.top),-v):t[5]=Math.min(Math.max(t[5],m),-v)}if("skip"!==n.animate&&this.transition(!n.animate),n.range&&this.$zoomRange.val(i),this.options.disableXAxis||this.options.disableYAxis){var w=this.getMatrix();this.options.disableXAxis&&(t[4]=w[4]),this.options.disableYAxis&&(t[5]=w[5])}return this.setTransform("matrix("+t.join(",")+")"),this.scale=i,this._checkPanWhenZoomed(i),n.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var n=t||!this.options.transition?"none":this._transition,i=this.$set,s=i.length;s--;)e.style(i[s],"transition")!==n&&e.style(i[s],"transition",n)},pan:function(t,e,n){if(!this.options.disablePan){n||(n={});var i=n.matrix;i||(i=this.getMatrix()),n.relative&&(t+=+i[4],e+=+i[5]),i[4]=t,i[5]=e,this.setMatrix(i,n),n.silent||this._trigger("pan",i[4],i[5])}},zoom:function(t,n){"object"==typeof t?(n=t,t=null):n||(n={});var i=e.extend({},this.options,n);if(!i.disableZoom){var r=!1,a=i.matrix||this.getMatrix(),h=+a[0];"number"!=typeof t&&(t=i.exponential&&h-i.increment>=1?Math[t?"sqrt":"pow"](h,2):h+i.increment*(t?-1:1),r=!0),t>i.maxScale?t=i.maxScale:t<i.minScale&&(t=i.minScale);var u=i.focal;if(u&&!i.disablePan){
this.resetDimensions();var c=i.dims=this.dimensions,l=u.clientX,f=u.clientY;this.isSVG||(l-=c.width/h/2,f-=c.height/h/2);var d=new o(l,f,1),p=new s(a),g=this.parentOffset||this.$parent.offset(),m=new s(1,0,g.left-this.$doc.scrollLeft(),0,1,g.top-this.$doc.scrollTop()),v=p.inverse().x(m.inverse().x(d)),w=t/a[0];p=p.x(new s([w,0,0,w,0,0])),d=m.x(p.x(v)),a[4]=+a[4]+(l-d.e(0)),a[5]=+a[5]+(f-d.e(1))}a[0]=t,a[3]="number"==typeof i.dValue?i.dValue:t,this.setMatrix(a,{animate:"undefined"!=typeof i.animate?i.animate:r,range:!i.noSetRange}),i.silent||this._trigger("zoom",a[0],i)}},option:function(t,n){var i;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;i={},i[t]=n}else i=t;this._setOptions(i)},_setOptions:function(t){e.each(t,e.proxy(function(t,n){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=n,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=n;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",n);break;case"minScale":this.$zoomRange.attr("min",n);break;case"maxScale":this.$zoomRange.attr("max",n);break;case"rangeStep":this.$zoomRange.attr("step",n);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":n instanceof e&&n.length&&(this.$set=n,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(t){var e=this.options;if(e.panOnlyWhenZoomed){t||(t=this.getMatrix()[0]);var n=t<=e.minScale;e.disablePan!==n&&this.option("disablePan",n)}},_initStyle:function(){var t={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var n=this.$parent;n.length&&!e.nodeName(this.parent,"body")&&(t={overflow:"hidden"},"static"===n.css("position")&&(t.position="relative"),n.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,n=this.options,i=n.eventNamespace,s="mousedown"+i+" pointerdown"+i+" MSPointerDown"+i,o="touchstart"+i+" "+s,a="touchend"+i+" click"+i+" pointerup"+i+" MSPointerUp"+i,h={},u=this.$reset,c=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=n["on"+this];e.isFunction(t)&&(h["panzoom"+this.toLowerCase()+i]=t)}),n.disablePan&&n.disableZoom||(h[o]=function(e){var i;("touchstart"===e.type?!(i=e.touches||e.originalEvent.touches)||(1!==i.length||n.disablePan)&&2!==i.length:n.disablePan||(e.which||e.originalEvent.which)!==n.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,i))},3===n.which&&(h.contextmenu=!1)),this.$elem.on(h),u.length&&u.on(a,function(e){e.preventDefault(),t.reset()}),c.length&&c.attr({step:n.rangeStep===r.defaults.rangeStep&&c.attr("step")||n.rangeStep,min:n.minScale,max:n.maxScale}).prop({value:this.getMatrix()[0]}),!n.disableZoom){var f=this.$zoomIn,d=this.$zoomOut;f.length&&d.length&&(f.on(a,function(e){e.preventDefault(),t.zoom()}),d.on(a,function(e){e.preventDefault(),t.zoom(!0)})),c.length&&(h={},h[s]=function(){t.transition(!0)},h[(l?"input":"change")+i]=function(){t.zoom(+this.value,{noSetRange:!0})},c.on(h))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_getDistance:function(t){var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],n=t[1];return{clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(u.call(arguments,1)))},_startMove:function(t,i){if(!this.panning){var s,o,r,h,u,c,l,f,d,p=this,g=this.options,m=g.eventNamespace,v=this.getMatrix(),w=v.slice(0),y=+w[4],b=+w[5],x={matrix:v,animate:"skip"},M=t.type;"pointerdown"===M?(o="pointermove",r="pointerup"):"touchstart"===M?(o="touchmove",r="touchend"):"MSPointerDown"===M?(o="MSPointerMove",r="MSPointerUp"):(o="mousemove",r="mouseup"),o+=m,r+=m,this.transition(!0),this.panning=!0,this._trigger("start",t,i),i&&2===i.length?(h=this._getDistance(i),u=+v[0],c=this._getMiddle(i),s=function(t){t.preventDefault(),i=t.touches||t.originalEvent.touches;var e=p._getMiddle(i),n=p._getDistance(i)-h;p.zoom(n*(g.increment/100)+u,{focal:e,matrix:v,animate:"skip"}),p.pan(+v[4]+e.clientX-c.clientX,+v[5]+e.clientY-c.clientY,x),c=e}):(i&&(d=i[0])?(l=d.pageX,f=d.pageY):(l=t.pageX,f=t.pageY),s=function(t){t.preventDefault(),i=t.touches||t.originalEvent.touches;var e;e=i?i[0]||{pageX:0,pageY:0}:t,p.pan(y+e.pageX-l,b+e.pageY-f,x)}),e(a).off(m).on(o,s).on(r,function(t){t.preventDefault(),e(this).off(m),p.panning=!1,t.type="panzoomend",p._trigger(t,v,!n(v,w))})}}},e.Panzoom=r,e.fn.panzoom=function(t){var n,i,s,o;return"string"==typeof t?(o=[],i=u.call(arguments,1),this.each(function(){n=e.data(this,h),n?"_"!==t.charAt(0)&&"function"==typeof(s=n[t])&&void 0!==(s=s.apply(n,i))&&o.push(s):o.push(void 0)}),o.length?1===o.length?o[0]:o:this):this.each(function(){new r(this,t)})},r}),function(t){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(e){return!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll=u),void 0!==e.click&&void 0===e.tap&&(e.tap=e.click),e||(e={}),e=t.extend({},t.fn.swipe.defaults,e),this.each(function(){var i=t(this),s=i.data(P);s||(s=new n(this,e),i.data(P,s))})}function n(e,n){function E(e){if(!(ut()||t(e.target).closest(n.excludedElements,Ht).length>0)){var i,s=e.originalEvent?e.originalEvent:e,o=_?s.touches[0]:s;return Wt=b,_?qt=s.touches.length:e.preventDefault(),Yt=0,kt=null,Nt=null,Ft=0,Lt=0,Zt=0,Rt=1,Xt=0,Qt=pt(),jt=vt(),at(),!_||qt===n.fingers||n.fingers===w||j()?(lt(0,o),Ut=Dt(),2==qt&&(lt(1,s.touches[1]),Lt=Zt=bt(Qt[0].start,Qt[1].start)),(n.swipeStatus||n.pinchStatus)&&(i=Y(s,Wt))):i=!1,i===!1?(Wt=T,Y(s,Wt),i):(n.hold&&(te=setTimeout(t.proxy(function(){Ht.trigger("hold",[s.target]),n.hold&&(i=n.hold.call(Ht,s,s.target))},this),n.longTapThreshold)),ct(!0),null)}}function z(t){var e=t.originalEvent?t.originalEvent:t;if(Wt!==M&&Wt!==T&&!ht()){var i,s=_?e.touches[0]:e,o=ft(s);if(Vt=Dt(),_&&(qt=e.touches.length),n.hold&&clearTimeout(te),Wt=x,2==qt&&(0==Lt?(lt(1,e.touches[1]),Lt=Zt=bt(Qt[0].start,Qt[1].start)):(ft(e.touches[1]),Zt=bt(Qt[0].end,Qt[1].end),Nt=Mt(Qt[0].end,Qt[1].end)),Rt=xt(Lt,Zt),Xt=Math.abs(Lt-Zt)),qt===n.fingers||n.fingers===w||!_||j()){if(kt=St(o.start,o.end),X(t,kt),Yt=Tt(o.start,o.end),Ft=yt(),gt(kt,Yt),(n.swipeStatus||n.pinchStatus)&&(i=Y(e,Wt)),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var r=!0;if(n.triggerOnTouchLeave){var a=Pt(this);r=Et(o.end,a)}!n.triggerOnTouchEnd&&r?Wt=$(x):n.triggerOnTouchLeave&&!r&&(Wt=$(M)),Wt!=T&&Wt!=M||Y(e,Wt)}}else Wt=T,Y(e,Wt);i===!1&&(Wt=T,Y(e,Wt))}}function O(t){var e=t.originalEvent;return _&&e.touches.length>0?(rt(),!0):(ht()&&(qt=Gt),Vt=Dt(),Ft=yt(),L()||!F()?(Wt=T,Y(e,Wt)):n.triggerOnTouchEnd||0==n.triggerOnTouchEnd&&Wt===x?(t.preventDefault(),Wt=M,Y(e,Wt)):!n.triggerOnTouchEnd&&B()?(Wt=M,k(e,Wt,d)):Wt===x&&(Wt=T,Y(e,Wt)),ct(!1),null)}function C(){qt=0,Vt=0,Ut=0,Lt=0,Zt=0,Rt=1,at(),ct(!1)}function A(t){var e=t.originalEvent;n.triggerOnTouchLeave&&(Wt=$(M),Y(e,Wt))}function I(){Ht.unbind(Ot,E),Ht.unbind($t,C),Ht.unbind(Ct,z),Ht.unbind(At,O),It&&Ht.unbind(It,A),ct(!1)}function $(t){var e=t,i=R(),s=F(),o=L();return!i||o?e=T:!s||t!=x||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!s&&t==M&&n.triggerOnTouchLeave&&(e=T):e=M,e}function Y(t,e){var n=void 0;return Q()||q()||H()||j()?((Q()||q())&&(n=k(t,e,l)),(H()||j())&&n!==!1&&(n=k(t,e,f))):st()&&n!==!1?n=k(t,e,p):ot()&&n!==!1?n=k(t,e,g):it()&&n!==!1&&(n=k(t,e,d)),e===T&&C(t),e===M&&(_?0==t.touches.length&&C(t):C(t)),n}function k(e,u,c){var m=void 0;if(c==l){if(Ht.trigger("swipeStatus",[u,kt||null,Yt||0,Ft||0,qt,Qt]),n.swipeStatus&&(m=n.swipeStatus.call(Ht,e,u,kt||null,Yt||0,Ft||0,qt,Qt),m===!1))return!1;if(u==M&&W()){if(Ht.trigger("swipe",[kt,Yt,Ft,qt,Qt]),n.swipe&&(m=n.swipe.call(Ht,e,kt,Yt,Ft,qt,Qt),m===!1))return!1;switch(kt){case i:Ht.trigger("swipeLeft",[kt,Yt,Ft,qt,Qt]),n.swipeLeft&&(m=n.swipeLeft.call(Ht,e,kt,Yt,Ft,qt,Qt));break;case s:Ht.trigger("swipeRight",[kt,Yt,Ft,qt,Qt]),n.swipeRight&&(m=n.swipeRight.call(Ht,e,kt,Yt,Ft,qt,Qt));break;case o:Ht.trigger("swipeUp",[kt,Yt,Ft,qt,Qt]),n.swipeUp&&(m=n.swipeUp.call(Ht,e,kt,Yt,Ft,qt,Qt));break;case r:Ht.trigger("swipeDown",[kt,Yt,Ft,qt,Qt]),n.swipeDown&&(m=n.swipeDown.call(Ht,e,kt,Yt,Ft,qt,Qt))}}}if(c==f){if(Ht.trigger("pinchStatus",[u,Nt||null,Xt||0,Ft||0,qt,Rt,Qt]),n.pinchStatus&&(m=n.pinchStatus.call(Ht,e,u,Nt||null,Xt||0,Ft||0,qt,Rt,Qt),m===!1))return!1;if(u==M&&N())switch(Nt){case a:Ht.trigger("pinchIn",[Nt||null,Xt||0,Ft||0,qt,Rt,Qt]),n.pinchIn&&(m=n.pinchIn.call(Ht,e,Nt||null,Xt||0,Ft||0,qt,Rt,Qt));break;case h:Ht.trigger("pinchOut",[Nt||null,Xt||0,Ft||0,qt,Rt,Qt]),n.pinchOut&&(m=n.pinchOut.call(Ht,e,Nt||null,Xt||0,Ft||0,qt,Rt,Qt))}}return c==d?u!==T&&u!==M||(clearTimeout(Jt),clearTimeout(te),G()&&!tt()?(Kt=Dt(),Jt=setTimeout(t.proxy(function(){Kt=null,Ht.trigger("tap",[e.target]),n.tap&&(m=n.tap.call(Ht,e,e.target))},this),n.doubleTapThreshold)):(Kt=null,Ht.trigger("tap",[e.target]),n.tap&&(m=n.tap.call(Ht,e,e.target)))):c==p?u!==T&&u!==M||(clearTimeout(Jt),Kt=null,Ht.trigger("doubletap",[e.target]),n.doubleTap&&(m=n.doubleTap.call(Ht,e,e.target))):c==g&&(u!==T&&u!==M||(clearTimeout(Jt),Kt=null,Ht.trigger("longtap",[e.target]),n.longTap&&(m=n.longTap.call(Ht,e,e.target)))),m}function F(){var t=!0;return null!==n.threshold&&(t=Yt>=n.threshold),t}function L(){var t=!1;return null!==n.cancelThreshold&&null!==kt&&(t=mt(kt)-Yt>=n.cancelThreshold),t}function Z(){return null!==n.pinchThreshold?Xt>=n.pinchThreshold:!0}function R(){var t;return t=n.maxTimeThreshold?!(Ft>=n.maxTimeThreshold):!0}function X(t,e){if(n.preventDefaultEvents!==!1)if(n.allowPageScroll===u)t.preventDefault();else{var a=n.allowPageScroll===c;switch(e){case i:(n.swipeLeft&&a||!a&&n.allowPageScroll!=m)&&t.preventDefault();break;case s:(n.swipeRight&&a||!a&&n.allowPageScroll!=m)&&t.preventDefault();break;case o:(n.swipeUp&&a||!a&&n.allowPageScroll!=v)&&t.preventDefault();break;case r:(n.swipeDown&&a||!a&&n.allowPageScroll!=v)&&t.preventDefault()}}}function N(){var t=U(),e=V(),n=Z();return t&&e&&n}function j(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function H(){return!(!N()||!j())}function W(){var t=R(),e=F(),n=U(),i=V(),s=L(),o=!s&&i&&n&&e&&t;return o}function q(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function Q(){return!(!W()||!q())}function U(){return qt===n.fingers||n.fingers===w||!_}function V(){return 0!==Qt[0].end.x}function B(){return!!n.tap}function G(){return!!n.doubleTap}function K(){return!!n.longTap}function J(){if(null==Kt)return!1;var t=Dt();return G()&&t-Kt<=n.doubleTapThreshold}function tt(){return J()}function et(){return(1===qt||!_)&&(isNaN(Yt)||Yt<n.threshold)}function nt(){return Ft>n.longTapThreshold&&y>Yt}function it(){return!(!et()||!B())}function st(){return!(!J()||!G())}function ot(){return!(!nt()||!K())}function rt(){Bt=Dt(),Gt=event.touches.length+1}function at(){Bt=0,Gt=0}function ht(){var t=!1;if(Bt){var e=Dt()-Bt;e<=n.fingerReleaseThreshold&&(t=!0)}return t}function ut(){return!(Ht.data(P+"_intouch")!==!0)}function ct(t){t===!0?(Ht.bind(Ct,z),Ht.bind(At,O),It&&Ht.bind(It,A)):(Ht.unbind(Ct,z,!1),Ht.unbind(At,O,!1),It&&Ht.unbind(It,A,!1)),Ht.data(P+"_intouch",t===!0)}function lt(t,e){var n=void 0!==e.identifier?e.identifier:0;return Qt[t].identifier=n,Qt[t].start.x=Qt[t].end.x=e.pageX||e.clientX,Qt[t].start.y=Qt[t].end.y=e.pageY||e.clientY,Qt[t]}function ft(t){var e=void 0!==t.identifier?t.identifier:0,n=dt(e);return n.end.x=t.pageX||t.clientX,n.end.y=t.pageY||t.clientY,n}function dt(t){for(var e=0;e<Qt.length;e++)if(Qt[e].identifier==t)return Qt[e]}function pt(){for(var t=[],e=0;5>=e;e++)t.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return t}function gt(t,e){e=Math.max(e,mt(t)),jt[t].distance=e}function mt(t){return jt[t]?jt[t].distance:void 0}function vt(){var t={};return t[i]=wt(i),t[s]=wt(s),t[o]=wt(o),t[r]=wt(r),t}function wt(t){return{direction:t,distance:0}}function yt(){return Vt-Ut}function bt(t,e){var n=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y);return Math.round(Math.sqrt(n*n+i*i))}function xt(t,e){var n=e/t*1;return n.toFixed(2)}function Mt(){return 1>Rt?h:a}function Tt(t,e){return Math.round(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)))}function _t(t,e){var n=t.x-e.x,i=e.y-t.y,s=Math.atan2(i,n),o=Math.round(180*s/Math.PI);return 0>o&&(o=360-Math.abs(o)),o}function St(t,e){var n=_t(t,e);return 45>=n&&n>=0?i:360>=n&&n>=315?i:n>=135&&225>=n?s:n>45&&135>n?r:o}function Dt(){var t=new Date;return t.getTime()}function Pt(e){e=t(e);var n=e.offset(),i={left:n.left,right:n.left+e.outerWidth(),top:n.top,bottom:n.top+e.outerHeight()};return i}function Et(t,e){return t.x>e.left&&t.x<e.right&&t.y>e.top&&t.y<e.bottom}var zt=_||D||!n.fallbackToMouseEvents,Ot=zt?D?S?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ct=zt?D?S?"MSPointerMove":"pointermove":"touchmove":"mousemove",At=zt?D?S?"MSPointerUp":"pointerup":"touchend":"mouseup",It=zt?null:"mouseleave",$t=D?S?"MSPointerCancel":"pointercancel":"touchcancel",Yt=0,kt=null,Ft=0,Lt=0,Zt=0,Rt=1,Xt=0,Nt=0,jt=null,Ht=t(e),Wt="start",qt=0,Qt=null,Ut=0,Vt=0,Bt=0,Gt=0,Kt=0,Jt=null,te=null;try{Ht.bind(Ot,E),Ht.bind($t,C)}catch(ee){t.error("events not supported "+Ot+","+$t+" on jQuery.swipe")}this.enable=function(){return Ht.bind(Ot,E),Ht.bind($t,C),Ht},this.disable=function(){return I(),Ht},this.destroy=function(){I(),Ht.data(P,null),Ht=null},this.option=function(e,i){if(void 0!==n[e]){if(void 0===i)return n[e];n[e]=i}else t.error("Option "+e+" does not exist on jQuery.swipe.options");return null}}var i="left",s="right",o="up",r="down",a="in",h="out",u="none",c="auto",l="swipe",f="pinch",d="tap",p="doubletap",g="longtap",m="horizontal",v="vertical",w="all",y=10,b="start",x="move",M="end",T="cancel",_="ontouchstart"in window,S=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,D=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,P="TouchSwipe",E={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};t.fn.swipe=function(n){var i=t(this),s=i.data(P);if(s&&"string"==typeof n){if(s[n])return s[n].apply(this,Array.prototype.slice.call(arguments,1));t.error("Method "+n+" does not exist on jQuery.swipe")}else if(!(s||"object"!=typeof n&&n))return e.apply(this,arguments);return i},t.fn.swipe.defaults=E,t.fn.swipe.phases={PHASE_START:b,PHASE_MOVE:x,PHASE_END:M,PHASE_CANCEL:T},t.fn.swipe.directions={LEFT:i,RIGHT:s,UP:o,DOWN:r,IN:a,OUT:h},t.fn.swipe.pageScroll={NONE:u,HORIZONTAL:m,VERTICAL:v,AUTO:c},t.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:w}});